{"version":3,"sources":["meteor://ðŸ’»app/lib/collections/collections.js","meteor://ðŸ’»app/lib/router.js","meteor://ðŸ’»app/lib/userUtils.js","meteor://ðŸ’»app/server/followUsers.js","meteor://ðŸ’»app/server/notifications.js","meteor://ðŸ’»app/server/publications.js","meteor://ðŸ’»app/server/tweetBox.js","meteor://ðŸ’»app/server/userData.js","meteor://ðŸ’»app/server/userManagement.js","meteor://ðŸ’»app/server/main.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["Twitts = new Meteor.Collection('twitts');\r\nRelationships = new Meteor.Collection('relationships');\r\nDataUser = new Meteor.Collection('dataUser');\r\nFavs = new Meteor.Collection('favs');\r\nNotifications = new Mongo.Collection('notifications');\r\nImages = new Mongo.Collection('images');","Router.configure({\r\n  loadingTemplate: 'loading',\r\n  notFoundTemplate: 'notFound',\r\n});\r\n\r\nRouter.route('/', {name: 'userManagement'});\r\n/*SE ACCEDE POR WINDOW.LOCATION*/\r\nRouter.route('/whoToFollow', {name: 'followUsers'});\r\nRouter.route('/Profile/:username', {\r\n\tname: 'userProfile',\r\n\tdata: function(){\r\n\t\tvar user = new Object();\r\n\t\tuser.name = this.params.username;\r\n\r\n\t\tvar currentUser = Session.get('currentUser');\r\n\r\n\t\tMeteor.call('findUserData', user.name, function(err, res) {\r\n\t      Session.set('dataUserShowProfile',res);\r\n\t    });\r\n\r\n\t    dataUserShowProfile = Session.get('dataUserShowProfile');\r\n\r\n\t    if(dataUserShowProfile){\r\n\t    \tif(dataUserShowProfile.userNameProfile != currentUser){\r\n\t\t    \tSession.set('showProfileOtherUser', false);\r\n\t\t    } else {\r\n\t\t    \tSession.set('showProfileOtherUser', true);\r\n\t\t    }\r\n\t    }\r\n\t    \r\n\t\treturn user;\r\n\t}\r\n});\r\nRouter.route('/Notifications/:userName', {\r\n\tname: 'twiitPageNew',\r\n\tdata: function(){\r\n\t\tvar user = new Object();\r\n\t\tuser.name = this.params.userName;\r\n\t\treturn user;\r\n\t}\r\n});\r\n//Router.route('/Comments', {name: 'twiitCommentPage'});\r\n/*SE ACCEDE POR PATHFOR*/\r\nRouter.route('/Comments/:_id', {\r\n\tname: 'twiitCommentPage',\r\n\tdata: function(){\r\n\t\tvar mode = Session.get('notificationsModeOn');\r\n\t\tvar idTwiit = new Object();\r\n\t\tidTwiit._id = this.params._id;\r\n\r\n\t\tif(mode){\r\n\t\t\tidTwiit.mode = mode;\r\n\t\t}\r\n\r\n\t\treturn idTwiit;\r\n\t}\r\n});\r\nRouter.route('/twiits/:_id', {\r\n  \tname: 'twiitPage',\r\n  \tdata: function() { \r\n  \t\treturn this.params;\r\n  \t}\r\n});\r\n\r\nRouter.route('/editProfile/:userName', {\r\n\tname: 'editProfile',\r\n\tdata: function(){\r\n\t\treturn this.params.userName;\t\r\n\t}\r\n});","UserUtils = function() {};    //no var in front\r\n\r\nUserUtils.findTweets = function(username) { \r\n  var currentTweets = Twitts.find({ user: username }).fetch().map(function(data) {\r\n    \t\t\t\t\t\t\t\treturn data.following;\r\n  \t\t\t\t\t\t  });\r\n  console.log(\"Tweets: \");\r\n  console.log(currentTweets);\r\n\r\n  return currentTweets;\r\n};\t\r\n//SIGUIENDO\r\nUserUtils.findFollowings = function(username) { \r\n  var currentFollowings = Relationships.find({ follower: username }).fetch().map(function(data) {\r\n    \t\t\t\t\t\t\t\treturn data.following;\r\n  \t\t\t\t\t\t  });\r\n  //console.log(\"Siguiendo: \");\r\n  //console.log(currentFollowings);\r\n\r\n  return currentFollowings;\r\n};\t\r\n//SEGUIDORES\r\nUserUtils.findFollowers = function(username) { \r\n  var currentFollowers = Relationships.find({ following: username }).fetch().map(function(data) {\r\n    \t\t\t\t\t\t\t\treturn data.following;\r\n  \t\t\t\t\t\t  });\r\n  //console.log(\"Seguidores: \");\r\n  //console.log(currentFollowers);\r\n\r\n  return currentFollowers;\r\n};\t\r\n\r\nUserUtils.findNotifications = function(username){\r\n\treturn Notifications.find({recepNotif: username, read: false, isOwnTwiit: false}, {sort: {twiitTimeStamp: -1}});\r\n}\r\n\r\nUserUtils.findOneNotification = function(username){\r\n  return Notifications.findOne({recepNotif: username, read: false, isOwnTwiit: false}, {sort: {twiitTimeStamp: -1}});\r\n}\r\n\r\nUserUtils.findNumberNotif = function(username){\r\n  return Notifications.find({recepNotif: username, read: false, isOwnTwiit: false}).count();\r\n};\r\n\r\nUserUtils.findNumberFavPerTwiit = function(idTwiit){\r\n  var twiitNumFav = Twitts.findOne({_id: idTwiit}).numFav;\r\n  return twiitNumFav;\r\n};\r\n\r\nUserUtils.findFavsForTwiit = function(id){\r\n  return Favs.findOne({idTwiit : id});\r\n}\r\n\r\nUserUtils.addFavToTwiit = function(id, idUser){\r\n  var resultToUpdate = false;\r\n  //RECUPERAMOS EL ARRAY QUE USAREMOS PARA ALMACENAR TODOS LOS ID DE LOS USUARIOS QUE DEN FAV AL TWIIT\r\n  var favObject = UserUtils.findFavsForTwiit(id);\r\n\r\n  if(!favObject){\r\n    //console.log(\"No tiene FAVS\");\r\n    \r\n  } else {\r\n    var arrAux = favObject.idUserTapFav;\r\n    var idFav = favObject._id;\r\n\r\n    arrAux.push(idUser);\r\n    var num = UserUtils.findNumberFavPerTwiit(id);\r\n    num++;\r\n\r\n    //AHORA HACEMOS LAS OPERACIONES DE UPDATE\r\n    res = Favs.update(idFav, {$set: {idUserTapFav: arrAux}});\r\n    resT = Twitts.update(id, {$set: {numFav: num}});\r\n\r\n    //COMPROBAMOS EL RESULTADO DE LA OPERACION DE UPDATE\r\n    if(res && resT){\r\n      resultToUpdate = true;\r\n    }\r\n  }\r\n\r\n  return resultToUpdate;\r\n};\r\n\r\nUserUtils.removeFavToTwiit = function(id, idUser){\r\n  var resultToUpdate = false;\r\n  //RECUPERAMOS EL ARRAY QUE USAREMOS PARA ALMACENAR TODOS LOS ID DE LOS USUARIOS QUE DEN FAV AL TWIIT\r\n  var favObject = UserUtils.findFavsForTwiit(id);\r\n  var arrAux = favObject.idUserTapFav;\r\n  var idFav = favObject._id;\r\n\r\n  //HAY QUE AVERIGUAR LA POSICION DEL idUser DENTRO DEL ARRAY DE LA BBDD\r\n  var posIdUser = arrAux.indexOf(idUser);\r\n  //AHORA ELIMINAMOS EL ELEMENTO ASOCIADO A ESA POSICION\r\n  delete arrAux[posIdUser];\r\n\r\n  var num = UserUtils.findNumberFavPerTwiit(id);\r\n  num--;\r\n\r\n  //AHORA HACEMOS LAS OPERACIONES DE UPDATE\r\n  res = Favs.update(idFav, {$set: {idUserTapFav: arrAux}});\r\n  resT = Twitts.update(id, {$set: {numFav: num}});\r\n\r\n  //COMPROBAMOS EL RESULTADO DE LA OPERACION DE UPDATE\r\n  if(res && resT){\r\n    resultToUpdate = true;\r\n  }\r\n\r\n  return resultToUpdate;\r\n};\r\n\r\nUserUtils.findTwiitFromNotif = function(id){\r\n  var twiitId = Notifications.findOne(id).twiitId;\r\n  return twiitId;\r\n};\r\n\r\nUserUtils.findNumComment = function(idTweet){\r\n  return Twitts.findOne({_id : idTweet}).numComment;\r\n};\r\n\r\n//PARA MOSTRAR NOTIFICACIONES EN EL NAVEGADOR WEB\r\nUserUtils.createNotifToBrowser = function(typeNotif, userName){\r\n  if (Notification) {\r\n    if (Notification.permission !== \"granted\") {\r\n      Notification.requestPermission();\r\n    }\r\n    var title = \"TwiitClone\";\r\n    var bodyNotif = \"\";\r\n\r\n    if(typeNotif === \"fav\"){\r\n      bodyNotif = \"El usuario \" + userName + \" ha dado fav a un twiit tuyo\";\r\n    } else if(typeNotif === \"comment\"){\r\n      bodyNotif = \"El usuario \" + userName + \" ha comentado un twiit tuyo\";\r\n    } else if(typeNotif === \"twiit\"){\r\n      bodyNotif = \"El usuario \" + userName + \" ha publicado a un twiit nuevo\";\r\n    } else if(typeNotif === \"moreNotif\"){\r\n      bodyNotif = \"Tienes muchas Notificaciones\";\r\n    }\r\n\r\n    var extra = { body: bodyNotif };\r\n\r\n    var noti = new Notification(title, extra);\r\n\r\n    noti.onclick = function(){\r\n      // Al hacer click\r\n      window.location = \"/Notifications/\" + Meteor.user().username;\r\n    };\r\n\r\n    noti.onclose = {\r\n      // Al cerrar\r\n    };\r\n\r\n    setTimeout( function() { noti.close() }, 5000);\r\n  }\r\n};\r\n\r\nUserUtils.findUserFromTwiit = function(twiitId){\r\n  return Twitts.findOne({_id : twiitId}).user;\r\n};","Meteor.methods({ \r\n  'findUser': function(username) {\r\n    return Meteor.users.findOne({\r\n      username: username\r\n    }, {\r\n      fields: { 'username': 1 }\r\n    });\r\n  },\r\n\r\n  'followUser': function(username) {\r\n    Relationships.insert({\r\n      follower: Meteor.user().username,\r\n      following: username\r\n    });\r\n  },\r\n\r\n  'recommendUsers': function() {\r\n\tif (Meteor.user()) {\r\n\t  var currentFollowings = UserUtils.findFollowings(Meteor.user().username);\r\n\r\n\t  var recUsers = Meteor.users.find({\r\n\t    username: {\r\n\t      $nin: currentFollowings\r\n\t    }\r\n\t  }, {\r\n\t    fields: { 'username': 1 },\r\n\t    limit: 5\r\n\t  }).fetch();\r\n\t  return recUsers;\r\n\t}\r\n   }\r\n});\r\n\r\n\r\n","Meteor.methods({ \r\n  'createTwiitNotification' : function(notif) {\r\n    var twiit = Twitts.findOne(notif._id);\r\n    var typeNotif = notif.typeOfNotif;\r\n\r\n    if(notif.recepNotif === notif.actorNotif){\r\n      isOwn = true;\r\n    } else {\r\n      isOwn = false;\r\n    }\r\n    \r\n    Notifications.insert({\r\n      twiitMessage: twiit.message,\r\n      twiitId: twiit._id,\r\n      recepNotif: notif.recepNotif,\r\n      actorNotif: notif.actorNotif,\r\n      twiitTimeStamp: twiit.timestamp,\r\n      typeOfNotif: typeNotif, \r\n      read: false,\r\n      isOwnTwiit: isOwn\r\n    });\r\n    \r\n  }\r\n});","Meteor.publish('twitts', function() {  \r\n  if (Meteor.userId) {\r\n    var username = Meteor.users.findOne({_id: this.userId}).username;\r\n    var currentFollowings = UserUtils.findFollowings(username);\r\n\r\n    return Twitts.find({user: { $in: currentFollowings }});\r\n  }\r\n});\r\n\r\nMeteor.publish('twittsProfile', function(username) {  \r\n  if (Meteor.userId) {\r\n    var username = Meteor.users.findOne({_id: this.userId}).username;\r\n    //var currentFollowings = UserUtils.findFollowings(username);\r\n\r\n    //return Twitts.find({user: { $in: currentFollowings }});\r\n    return Twitts.find({user: username});\r\n  }\r\n});\r\n\r\nMeteor.publish('twittsWithComment', function(idTweet) {  \r\n  if (Meteor.userId) {\r\n    return Twitts.find();\r\n  }\r\n});\r\n\r\nMeteor.publish('notifications', function() {\r\n  return Notifications.find();\r\n});\r\n\r\nMeteor.publish('allNotifications', function(notifId) {\r\n  return Notifications.find({_id : notifId}, {read: false});\r\n});\r\n\r\nMeteor.publish('favs', function() {\r\n  return Favs.find();\r\n});\r\n\r\nMeteor.publish('dataUser', function() {\r\n  return DataUser.find();\r\n});\r\n\r\nMeteor.publish('images', function() {\r\n  return Images.find();\r\n});\r\n/*\r\nMeteor.publishComposite('twitts', function(username) {  \r\n  return {\r\n    find: function() {\r\n      // Comprobar los usuarios a los que se estÃ¡ siguiendo\r\n      return Relationships.find({ follower: username });\r\n    },\r\n    children: [{\r\n      find: function(relationship) {\r\n        // Encontrar mensajes de los usuarios que se siguen\r\n        return Twitts.find({user: relationship.following});\r\n      }\r\n    }]\r\n  }\r\n});\r\n*/","Meteor.methods({ \r\n  'insertTweet': function(tweet) {\r\n    var insertComment = false;\r\n\r\n    twiit = new Object();\r\n    twiit.message = tweet.message;\r\n    twiit.user = Meteor.user().username;\r\n    twiit.timestamp = new Date();\r\n    twiit.numFav = 0;\r\n    twiit.numComment = 0;\r\n\r\n    //SE EJECUTA CUANDO SE QUIERE INSERTAR UN TWIIT DESDE UN COMENTARIO\r\n    if(tweet.type){\r\n      twiit.commentType = true;\r\n      twiit.twiitIdComment = tweet.twiitId;\r\n    } \r\n\r\n    fav = new Object();\r\n    fav.idTwiit = \"\";\r\n    fav.idUserTapFav = [];\r\n\r\n    if(tweet.type){\r\n      if (Meteor.user()) {\r\n        twiit._id = Twitts.insert({\r\n          message : twiit.message,\r\n          user : twiit.user,\r\n          timestamp : twiit.timestamp,\r\n          numFav : twiit.numFav,\r\n          numComment : twiit.numComment,\r\n          commentType : twiit.commentType,\r\n          twiitIdComment : twiit.twiitIdComment\r\n        });\r\n      }\r\n    } else {\r\n      if (Meteor.user()) {\r\n        twiit._id = Twitts.insert({\r\n          message : twiit.message,\r\n          user : twiit.user,\r\n          timestamp : twiit.timestamp,\r\n          numFav : twiit.numFav,\r\n          numComment : twiit.numComment\r\n        });\r\n      }\r\n    }\r\n\r\n    fav._id = Favs.insert({\r\n      idTwiit : twiit._id,\r\n      idUserTapFav : fav.idUserTapFav\r\n    });\r\n\r\n    var notif = new Object();\r\n    notif._id = twiit._id;\r\n    notif.typeOfNotif = tweet.typeOfNotif;\r\n    notif.actorNotif = tweet.actorUser;\r\n    notif.recepNotif = tweet.recepUser;\r\n    \r\n    //console.log(notif);\r\n\r\n  \tMeteor.call('createTwiitNotification', notif);\r\n\r\n    if(tweet.type){\r\n      Twitts.update({_id: twiit.twiitIdComment}, {$set: {numComment : tweet.numComment}});\r\n    }\r\n  }\r\n});","Meteor.methods({ \r\n  'findUserFromDB': function(username) {\r\n    //Meteor._sleepForMs(1000);\r\n    return Meteor.users.findOne({\"username\" : username});\r\n  },\r\n\r\n  'insertDataUser': function(userData) {\r\n\r\n    //BUSCAMOS AL USUARIO QUE SE HA CREADO ANTES PARA RECUPERAR SU _ID\r\n    Meteor.call('findUserFromDB', userData.userNameProfile, function(err, res){\r\n      userData.userId = res._id;\r\n    });\r\n\r\n    if (Meteor.user()) {\r\n      DataUser.insert({\r\n        userId : userData.userId,\r\n        userNameProfile : userData.userNameProfile,\r\n        userName : userData.userName,\r\n        userImg : userData.userImg,\r\n        userDescription : userData.userDescription\r\n      });\r\n    }\r\n  },\r\n\r\n  'findUserData': function(userName){\r\n    return DataUser.findOne({userNameProfile : userName});\r\n  },\r\n\r\n  'findUserImg': function(userImg){\r\n    return Images.findOne({_id : userImg}).imgCode;\r\n  },\r\n\r\n  'updUserData': function(newData){\r\n    DataUser.update({_id: newData.userId}, {$set: {userDescription : newData.description, userImg : newData.imgId}});\r\n  },\r\n\r\n  'updUserDataSocialNetworks': function(newData){\r\n    if((newData.userFb != null) && (newData.userInsta != null) && (newData.userWhats != null)){\r\n      DataUser.update({_id: newData.userId}, {$set: {userFb : newData.userFb, userWhats : newData.userWhats, userInsta : newData.userInsta}});\r\n    } else {\r\n      if(newData.userFb != null){\r\n        DataUser.update({_id: newData.userId}, {$set: {userFb : newData.userFb}});\r\n      }\r\n\r\n      if(newData.userInsta != null){\r\n        DataUser.update({_id: newData.userId}, {$set: {userInsta : newData.userInsta}});\r\n      }\r\n\r\n      if(newData.userWhats != null){\r\n        DataUser.update({_id: newData.userId}, {$set: {userWhats : newData.userWhats}});\r\n      }\r\n    }\r\n  },\r\n\r\n  'removeDataSocialNetworks': function(newData){\r\n    console.log(newData.userId + \" \" + newData.propertyToRem);\r\n\r\n    switch(newData.propertyToRem){\r\n        case \"WhatsApp\": {\r\n          DataUser.update({_id: newData.userId},  {$unset: { \"userWhats\" : 1 }});\r\n        };\r\n          break;\r\n        case \"Instagram\": {\r\n          DataUser.update({_id: newData.userId},  {$unset: { \"userInsta\" : 1 }});\r\n        };\r\n          break;\r\n        case \"Facebook\": {\r\n          DataUser.update({_id: newData.userId},  {$unset: { \"userFb\" : 1 }});\r\n        };\r\n          break;\r\n      }\r\n    \r\n    //ESTE COMANDO ES EL QUE SE UTILIZA EN MONGO\r\n    //db.dataUser.update({\"_id\": \"rQTzzDMfr4ZkiR7S8\"},  {\"$unset\":{\"userWhats\":1}});\r\n  },\r\n\r\n  'insertNewImage': function(code){\r\n    return Images.insert({\r\n      imgCode : code\r\n    });\r\n  },\r\n\r\n  'removeThisUser': function(userToRemove){\r\n    //HAY QUE ELIMINAR EL USUARIO DE dataUser Y DE users\r\n    var idImgUser = DataUser.findOne({userId: userToRemove.id}).userImg;\r\n\r\n    if(idImgUser){\r\n      Images.remove({_id: idImgUser});\r\n    }\r\n   \r\n    Notifications.remove({recepNotif: userToRemove.name});\r\n    Relationships.remove({follower: userToRemove.name});\r\n    Relationships.remove({following: userToRemove.name});\r\n\r\n    Favs.find({idUserTapFav: userToRemove.id}).fetch().map(function(data) {\r\n      if(data.idUserTapFav){\r\n        var aux = data.idUserTapFav;\r\n        var pos = aux.indexOf(userToRemove.id);\r\n        if(pos != -1){\r\n          UserUtils.removeFavToTwiit(data.idTwiit, userToRemove.id);\r\n        }\r\n      }\r\n    });\r\n\r\n    Twitts.remove({user: userToRemove.name});\r\n    Meteor.users.remove({_id: userToRemove.id});\r\n    DataUser.remove({userId: userToRemove.id});\r\n  }\r\n});","Meteor.methods({ \r\n  'tweetsPublish': function(username) {\r\n    console.log(\"Usuario a buscar: \" + username);\r\n    console.log(\"Resultado: \");\r\n    var resul =  UserUtils.findTweets(Meteor.user().username);\r\n    return resul.length;\r\n  },\r\n  \r\n  'usersFollowers': function(username) {\r\n    var currentFollowers = UserUtils.findFollowers(username);\r\n    return currentFollowers.length;\r\n  },\r\n\r\n  'usersFollowings': function(username) {\r\n\t  var currentFollowings = UserUtils.findFollowings(username);\r\n    \r\n    return currentFollowings.length;\r\n  }\r\n});","import { Meteor } from 'meteor/meteor';\n\nMeteor.startup(() => {\n  // code to run on server at startup\n  Relationships._ensureIndex({follower: 1, following: 1}, {unique: 1});\n  \n  Twitts.allow({\n  \tinsert: function(userId, disconnect) {\n  \t   \treturn true;\n  \t},\n  \tupdate: function(id, doc){\n  \t\treturn true;\n  \t}, \n    \n  });\n\n  Favs.allow({\n  \tinsert: function(userId, disconnect) {\n\t   \treturn true;\n\t},\n  \tupdate: function(userId, doc) {\n  \t\tconsole.log(\"Update Oper\");\n\t    return true;\n  \t}\n  });\n\n  Notifications.allow({\n  \tupdate: function(userId, doc) {\n\t    return true;\n  \t}\n  });\n\n  DataUser.allow({\n    insert: function(userId, disconnect){\n      return true;\n    }\n  });\n\n  Images.allow({\n    insert: function(userId, disconnect){\n      return true;\n    }\n  });\n});\n"]}