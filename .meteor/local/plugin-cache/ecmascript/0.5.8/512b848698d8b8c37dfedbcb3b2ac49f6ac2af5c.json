{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/server/publications.js","filenameRelative":"/server/publications.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/server/publications.js.map","sourceFileName":"/server/publications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"publications"},"ignored":false,"code":"Meteor.publish('twitts', function () {\n  if (Meteor.userId) {\n    var username = Meteor.users.findOne({ _id: this.userId }).username;\n    var currentFollowings = UserUtils.findFollowings(username);\n\n    return Twitts.find({ user: { $in: currentFollowings } });\n  }\n});\n\nMeteor.publish('twittsProfile', function (username) {\n  if (Meteor.userId) {\n    var username = Meteor.users.findOne({ _id: this.userId }).username;\n    //var currentFollowings = UserUtils.findFollowings(username);\n\n    //return Twitts.find({user: { $in: currentFollowings }});\n    return Twitts.find({ user: username });\n  }\n});\n\nMeteor.publish('notifications', function (username) {\n  console.log(username);\n  console.log(Notifications.find({ user: username, read: true }).count());\n  return Notifications.find({ user: username, read: false });\n});\n/*\r\nMeteor.publishComposite('twitts', function(username) {  \r\n  return {\r\n    find: function() {\r\n      // Comprobar los usuarios a los que se está siguiendo\r\n      return Relationships.find({ follower: username });\r\n    },\r\n    children: [{\r\n      find: function(relationship) {\r\n        // Encontrar mensajes de los usuarios que se siguen\r\n        return Twitts.find({user: relationship.following});\r\n      }\r\n    }]\r\n  }\r\n});\r\n*/","ast":null,"map":{"version":3,"sources":["/server/publications.js"],"names":[],"mappings":"AAAA,OAAO,OAAP,CAAe,QAAf,EAAyB,YAAW;AAClC,MAAI,OAAO,MAAX,EAAmB;AACjB,QAAI,WAAW,OAAO,KAAP,CAAa,OAAb,CAAqB,EAAC,KAAK,KAAK,MAAX,EAArB,EAAyC,QAAxD;AACA,QAAI,oBAAoB,UAAU,cAAV,CAAyB,QAAzB,CAAxB;;AAEA,WAAO,OAAO,IAAP,CAAY,EAAC,MAAM,EAAE,KAAK,iBAAP,EAAP,EAAZ,CAAP;AACD;AACF,CAPD;;AASA,OAAO,OAAP,CAAe,eAAf,EAAgC,UAAS,QAAT,EAAmB;AACjD,MAAI,OAAO,MAAX,EAAmB;AACjB,QAAI,WAAW,OAAO,KAAP,CAAa,OAAb,CAAqB,EAAC,KAAK,KAAK,MAAX,EAArB,EAAyC,QAAxD;;;;AAIA,WAAO,OAAO,IAAP,CAAY,EAAC,MAAM,QAAP,EAAZ,CAAP;AACD;AACF,CARD;;AAUA,OAAO,OAAP,CAAe,eAAf,EAAgC,UAAS,QAAT,EAAmB;AACjD,UAAQ,GAAR,CAAY,QAAZ;AACA,UAAQ,GAAR,CAAY,cAAc,IAAd,CAAmB,EAAC,MAAM,QAAP,EAAiB,MAAM,IAAvB,EAAnB,EAAiD,KAAjD,EAAZ;AACA,SAAO,cAAc,IAAd,CAAmB,EAAC,MAAM,QAAP,EAAiB,MAAM,KAAvB,EAAnB,CAAP;AACD,CAJD","file":"/server/publications.js.map","sourcesContent":["Meteor.publish('twitts', function() {  \r\n  if (Meteor.userId) {\r\n    var username = Meteor.users.findOne({_id: this.userId}).username;\r\n    var currentFollowings = UserUtils.findFollowings(username);\r\n\r\n    return Twitts.find({user: { $in: currentFollowings }});\r\n  }\r\n});\r\n\r\nMeteor.publish('twittsProfile', function(username) {  \r\n  if (Meteor.userId) {\r\n    var username = Meteor.users.findOne({_id: this.userId}).username;\r\n    //var currentFollowings = UserUtils.findFollowings(username);\r\n\r\n    //return Twitts.find({user: { $in: currentFollowings }});\r\n    return Twitts.find({user: username});\r\n  }\r\n});\r\n\r\nMeteor.publish('notifications', function(username) {\r\n  console.log(username);\r\n  console.log(Notifications.find({user: username, read: true}).count());\r\n  return Notifications.find({user: username, read: false});\r\n});\r\n/*\r\nMeteor.publishComposite('twitts', function(username) {  \r\n  return {\r\n    find: function() {\r\n      // Comprobar los usuarios a los que se está siguiendo\r\n      return Relationships.find({ follower: username });\r\n    },\r\n    children: [{\r\n      find: function(relationship) {\r\n        // Encontrar mensajes de los usuarios que se siguen\r\n        return Twitts.find({user: relationship.following});\r\n      }\r\n    }]\r\n  }\r\n});\r\n*/"]},"hash":"512b848698d8b8c37dfedbcb3b2ac49f6ac2af5c"}
