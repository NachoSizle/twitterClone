{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/partialTemplates/followUsers.js","filenameRelative":"/client/partialTemplates/followUsers.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/partialTemplates/followUsers.js.map","sourceFileName":"/client/partialTemplates/followUsers.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"followUsers"},"ignored":false,"code":"Template.followUsers.events({\n  'submit form': function () {\n    function submitForm(event) {\n\n      var searchUser = event.target.searchUser.value;\n      var foundUser = Meteor.call('findUser', searchUser, function (err, res) {\n        if (res) Session.set('foundUser', res);\n        console.log(res);\n      });\n      return false;\n    }\n\n    return submitForm;\n  }(),\n\n  'click #follow': function () {\n    function clickFollow() {\n      Meteor.call('followUser', Session.get('foundUser').username);\n    }\n\n    return clickFollow;\n  }(),\n\n  'click #followRec': function () {\n    function clickFollowRec(event) {\n      Meteor.call('followUser', this.username);\n    }\n\n    return clickFollowRec;\n  }()\n});\n\nTemplate.followUsers.helpers({\n  'foundUser': function () {\n    function foundUser() {\n      return Session.get('foundUser');\n    }\n\n    return foundUser;\n  }(),\n\n  'recommendedUsers': function () {\n    function recommendedUsers() {\n      if (Meteor.user()) {\n        var currentFollowings = UserUtils.findFollowings(Meteor.user().username);\n\n        var recUsers = Meteor.users.find({\n          username: {\n            $nin: currentFollowings\n          }\n        }, {\n          fields: { 'username': 1 },\n          limit: 5\n        }).fetch();\n\n        return recUsers;\n      }\n    }\n\n    return recommendedUsers;\n  }()\n});\n\nTemplate.followUsers.onRendered(function () {\n  Meteor.call('recommendUsers', function (err, res) {\n    Session.set('recommendedUsers', res);\n  });\n});\n\nTemplate.followUsers.onCreated(function () {\n  if (Meteor.user()) {\n    this.subscribe('users', Meteor.user().username);\n    this.subscribe('followings', Meteor.user().username);\n    this.subscribe('followers', Meteor.user().username);\n    this.subscribe('tweets', Meteor.user().username);\n  }\n});","ast":null,"map":{"version":3,"sources":["/client/partialTemplates/followUsers.js"],"names":[],"mappings":"AAAA,SAAS,WAAT,CAAqB,MAArB,CAA4B;AAC1B;AAAe,wBAAS,KAAT,EAAgB;;AAE7B,UAAI,aAAa,MAAM,MAAN,CAAa,UAAb,CAAwB,KAAzC;AACA,UAAI,YAAY,OAAO,IAAP,CAAY,UAAZ,EAAwB,UAAxB,EAAoC,UAAS,GAAT,EAAc,GAAd,EAAmB;AACrE,YAAI,GAAJ,EAAS,QAAQ,GAAR,CAAY,WAAZ,EAAyB,GAAzB;AACT,gBAAQ,GAAR,CAAY,GAAZ;AACD,OAHe,CAAhB;AAIA,aAAO,KAAP;AACD;;AARD;AAAA,KAD0B;;AAW1B;AAAiB,2BAAW;AAC1B,aAAO,IAAP,CAAY,YAAZ,EAA0B,QAAQ,GAAR,CAAY,WAAZ,EAAyB,QAAnD;AACD;;AAFD;AAAA,KAX0B;;AAe1B;AAAoB,4BAAS,KAAT,EAAgB;AAClC,aAAO,IAAP,CAAY,YAAZ,EAA0B,KAAK,QAA/B;AACD;;AAFD;AAAA;AAf0B,CAA5B;;AAoBA,SAAS,WAAT,CAAqB,OAArB,CAA6B;AAC3B;AAAa,yBAAW;AACtB,aAAO,QAAQ,GAAR,CAAY,WAAZ,CAAP;AACD;;AAFD;AAAA,KAD2B;;AAK3B;AAAoB,gCAAW;AAC7B,UAAI,OAAO,IAAP,EAAJ,EAAmB;AACjB,YAAI,oBAAoB,UAAU,cAAV,CAAyB,OAAO,IAAP,GAAc,QAAvC,CAAxB;;AAEA,YAAI,WAAW,OAAO,KAAP,CAAa,IAAb,CAAkB;AAC/B,oBAAU;AACR,kBAAM;AADE;AADqB,SAAlB,EAIZ;AACD,kBAAQ,EAAE,YAAY,CAAd,EADP;AAED,iBAAO;AAFN,SAJY,EAOZ,KAPY,EAAf;;AASA,eAAO,QAAP;AACD;AACF;;AAfD;AAAA;AAL2B,CAA7B;;AAuBA,SAAS,WAAT,CAAqB,UAArB,CAAgC,YAAY;AAC1C,SAAO,IAAP,CAAY,gBAAZ,EAA8B,UAAS,GAAT,EAAc,GAAd,EAAmB;AAC/C,YAAQ,GAAR,CAAY,kBAAZ,EAAgC,GAAhC;AACD,GAFD;AAGD,CAJD;;AAMA,SAAS,WAAT,CAAqB,SAArB,CAA+B,YAAW;AACxC,MAAI,OAAO,IAAP,EAAJ,EAAmB;AACjB,SAAK,SAAL,CAAe,OAAf,EAAwB,OAAO,IAAP,GAAc,QAAtC;AACA,SAAK,SAAL,CAAe,YAAf,EAA6B,OAAO,IAAP,GAAc,QAA3C;AACA,SAAK,SAAL,CAAe,WAAf,EAA4B,OAAO,IAAP,GAAc,QAA1C;AACA,SAAK,SAAL,CAAe,QAAf,EAAyB,OAAO,IAAP,GAAc,QAAvC;AACD;AACF,CAPD","file":"/client/partialTemplates/followUsers.js.map","sourcesContent":["Template.followUsers.events({ \r\n  'submit form': function(event) {\r\n\r\n    var searchUser = event.target.searchUser.value;\r\n    var foundUser = Meteor.call('findUser', searchUser, function(err, res) {\r\n      if (res) Session.set('foundUser', res);\r\n      console.log(res);\r\n    });\r\n    return false;\r\n  }, \r\n\r\n  'click #follow': function() {\r\n    Meteor.call('followUser', Session.get('foundUser').username);\r\n  },\r\n\r\n  'click #followRec': function(event) {\r\n    Meteor.call('followUser', this.username);\r\n  }\r\n});\r\n\r\nTemplate.followUsers.helpers({ \r\n  'foundUser': function() {\r\n    return Session.get('foundUser');\r\n  },\r\n\r\n  'recommendedUsers': function() {\r\n    if (Meteor.user()) {\r\n      var currentFollowings = UserUtils.findFollowings(Meteor.user().username);\r\n\r\n      var recUsers = Meteor.users.find({\r\n        username: {\r\n          $nin: currentFollowings\r\n        }\r\n      }, {\r\n        fields: { 'username': 1 },\r\n        limit: 5\r\n      }).fetch();\r\n\r\n      return recUsers;\r\n    }\r\n  }\r\n});\r\n\r\nTemplate.followUsers.onRendered(function () { \r\n  Meteor.call('recommendUsers', function(err, res) {\r\n    Session.set('recommendedUsers', res);\r\n  });\r\n});\r\n\r\nTemplate.followUsers.onCreated(function() {  \r\n  if (Meteor.user()) {\r\n    this.subscribe('users', Meteor.user().username)\r\n   \tthis.subscribe('followings', Meteor.user().username);\r\n    this.subscribe('followers', Meteor.user().username);\r\n    this.subscribe('tweets', Meteor.user().username);\r\n  }\r\n});\r\n"]},"hash":"9c7c88cd04e9724ad6c10e93a560a9aaee15652b"}
