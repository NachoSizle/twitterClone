{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/server/publications.js","filenameRelative":"/server/publications.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/server/publications.js.map","sourceFileName":"/server/publications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"publications"},"ignored":false,"code":"Meteor.publish('twitts', function () {\n  if (Meteor.userId) {\n    var username = Meteor.users.findOne({ _id: this.userId }).username;\n    var currentFollowings = UserUtils.findFollowings(username);\n\n    return Twitts.find({ user: { $in: currentFollowings } });\n  }\n});\n/*\r\nMeteor.publishComposite('twitts', function(username) {  \r\n  return {\r\n    find: function() {\r\n      // Comprobar los usuarios a los que se está siguiendo\r\n      return Relationships.find({ follower: username });\r\n    },\r\n    children: [{\r\n      find: function(relationship) {\r\n        // Encontrar mensajes de los usuarios que se siguen\r\n        return Twitts.find({user: relationship.following});\r\n      }\r\n    }]\r\n  }\r\n});\r\n*/\n\n// Lista de todos los usuarios\nMeteor.publish('users', function (username) {\n  return Meteor.users.find({}, {\n    fields: { 'username': 1 },\n    limit: 100\n  });\n});\n\n// Lista de usuarios seguidos por el usuario\nMeteor.publish('followings', function (username) {\n  return Relationships.find({ follower: username });\n});","ast":null,"map":{"version":3,"sources":["/server/publications.js"],"names":[],"mappings":"AAAA,OAAO,OAAP,CAAe,QAAf,EAAyB,YAAW;AAClC,MAAI,OAAO,MAAX,EAAmB;AACjB,QAAI,WAAW,OAAO,KAAP,CAAa,OAAb,CAAqB,EAAC,KAAK,KAAK,MAAX,EAArB,EAAyC,QAAxD;AACA,QAAI,oBAAoB,UAAU,cAAV,CAAyB,QAAzB,CAAxB;;AAEA,WAAO,OAAO,IAAP,CAAY,EAAC,MAAM,EAAE,KAAK,iBAAP,EAAP,EAAZ,CAAP;AACD;AACF,CAPD;;;;;;;;;;;;;;;;;;;AA0BA,OAAO,OAAP,CAAe,OAAf,EAAwB,UAAS,QAAT,EAAmB;AACzC,SAAO,OAAO,KAAP,CAAa,IAAb,CAAkB,EAAlB,EAAsB;AAC3B,YAAQ,EAAE,YAAY,CAAd,EADmB;AAE3B,WAAO;AAFoB,GAAtB,CAAP;AAID,CALD;;;AAQA,OAAO,OAAP,CAAe,YAAf,EAA6B,UAAS,QAAT,EAAmB;AAC9C,SAAO,cAAc,IAAd,CAAmB,EAAE,UAAU,QAAZ,EAAnB,CAAP;AACD,CAFD","file":"/server/publications.js.map","sourcesContent":["Meteor.publish('twitts', function() {  \r\n  if (Meteor.userId) {\r\n    var username = Meteor.users.findOne({_id: this.userId}).username;\r\n    var currentFollowings = UserUtils.findFollowings(username);\r\n\r\n    return Twitts.find({user: { $in: currentFollowings }});\r\n  }\r\n});\r\n/*\r\nMeteor.publishComposite('twitts', function(username) {  \r\n  return {\r\n    find: function() {\r\n      // Comprobar los usuarios a los que se está siguiendo\r\n      return Relationships.find({ follower: username });\r\n    },\r\n    children: [{\r\n      find: function(relationship) {\r\n        // Encontrar mensajes de los usuarios que se siguen\r\n        return Twitts.find({user: relationship.following});\r\n      }\r\n    }]\r\n  }\r\n});\r\n*/\r\n\r\n// Lista de todos los usuarios\r\nMeteor.publish('users', function(username) {  \r\n  return Meteor.users.find({}, {\r\n    fields: { 'username': 1 },\r\n    limit: 100\r\n  });\r\n});\r\n\r\n// Lista de usuarios seguidos por el usuario\r\nMeteor.publish('followings', function(username) {  \r\n  return Relationships.find({ follower: username });\r\n});"]},"hash":"0521a4e58aa637c2a37ff109cf847c4a7337203c"}
